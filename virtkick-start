#!/bin/sh
cd $(dirname $0)

if ! which virsh &> /dev/null; then
  echo "virsh is not available, please install libvirtd"
fi
export LIBVIRT_VERSION=$(virsh --version)

if ! [ -e webapp/README.md ] || ! [ -e backend/README.md ];then
  echo "Pulling backend and webapp submodules"
	git submodule update --recursive
fi

. setup/node.sh
if ! [ -e node_modules ];then
npm install
fi
. setup/ruby.sh

. setup/python.sh

node starter.js $*

# Remember error
rc=$?
if [[ $rc != 0 ]] ; then
    exit $rc
fi
